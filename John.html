<!doctype html>
<html lang="he" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>××—×©×‘×•×Ÿ ×‘×œ×•×§×™ ×’'×•× ×¡×•×Ÿ â€“ ×¡×˜ ××“×•×™×§ ×©×œ×š</title>
<style>
:root{--bg:#0b0c10;--card:#14171d;--ink:#f2f2f2;--accent:#4da3ff;--line:#1f232b}
body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial;
background:var(--bg);color:var(--ink)}
header{text-align:center;padding:20px}
h1{margin:0;font-size:1.4rem}
.card{background:var(--card);border:1px solid var(--line);border-radius:14px;
padding:18px;margin:12px auto;max-width:720px;box-shadow:0 2px 10px rgba(0,0,0,.25)}
input,button{width:100%;padding:10px;border-radius:8px;border:1px solid var(--line);
background:#0e1216;color:var(--ink);font-size:1rem}
button{background:var(--accent);color:#001428;font-weight:700;cursor:pointer}
.result{line-height:1.8;font-size:1.1rem}
.comment{color:#a7a7a7;font-size:.95rem;margin-top:10px}
.sumline{margin-top:10px;font-size:1.05rem;color:#ccc}
</style>
</head>
<body>
<header>
<h1>××—×©×‘×•×Ÿ ×‘×œ×•×§×™ ×’'×•× ×¡×•×Ÿ â€“ ×œ×¤×™ ×”×¡×˜ ×©×œ×š</h1>
<div style="color:#a7a7a7;font-size:.9rem">×¨×§ ×”×‘×œ×•×§×™× ×”×§×™×™××™× ×‘×¤×•×¢×œ ×‘×§×•×¤×¡×” ×©×œ×š</div>
</header>

<div class="card">
<label>××™×“×” × ×“×¨×©×ª (××´×)</label>
<input id="val" type="number" step="0.001" placeholder="×œ×“×•×’××”: 27.7">
<button id="calc" style="margin-top:10px">×—×©×‘</button>
</div>

<div id="out" class="card" style="display:none"></div>

<script>
// ğŸ”¹ ×¨×§ ×”×‘×œ×•×§×™× ×”××“×•×™×§×™× ×©×™×© ×œ×š ×‘×§×•×¤×¡×”:
const blocks = [
  // ××œ×¤×™×•×ª
  1.005,1.01,1.02,1.03,1.04,1.05,1.06,1.07,1.08,1.09,
  // ×¢×©×™×¨×™×•×ª
  1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,1,
  // ×©×œ××™×
  2,3,4,5,6,7,8,9,10,
  // ×’×“×•×œ×™×
  20,30,50
];

function findClosestCombo(target){
  let best=null;
  const n=blocks.length;
  function dfs(start,sum,combo){
    const diff = target - sum;
    if(Math.abs(diff) < 0.0005){
      best={combo:[...combo],sum};
      return true;
    }
    if(sum>target || combo.length>4) return false;
    for(let i=start;i<n;i++){
      dfs(i+1,sum+blocks[i],[...combo,blocks[i]]);
    }
  }
  dfs(0,0,[]);
  if(best) return best;

  // ×× ××™×Ÿ ×”×ª×××” ××“×•×™×§×ª â€“ × ×—×¤×© ××ª ×”×§×¨×•×‘×” ×‘×™×•×ª×¨
  let closest={err:999,combo:[]};
  function scan(start,sum,combo){
    if(combo.length>4)return;
    const err=Math.abs(target-sum);
    if(err<closest.err)closest={err,sum,combo:[...combo]};
    for(let i=start;i<n;i++){
      scan(i+1,sum+blocks[i],[...combo,blocks[i]]);
    }
  }
  scan(0,0,[]);
  return closest;
}

function cleanLabel(b){
  if (b % 1 === 0) return `${b}`;            // ×©×œ××™× ×•×’×“×•×œ×™×
  if (b < 1.01) return `${b.toFixed(3)}`;   // ××œ×¤×™×•×ª
  if (b < 1.1) return `${b.toFixed(2)}`;    // ×××™×•×ª
  return `${b.toFixed(1)}`;                 // ×¢×©×™×¨×™×•×ª
}

function formatBlocks(arr){
  return arr.map(b=>`â†’ ${cleanLabel(b)}`).join("<br>");
}

document.getElementById("calc").onclick=()=>{
  const target=parseFloat(document.getElementById("val").value);
  if(isNaN(target))return alert("×”×›× ×¡ ××™×“×” ×ª×§×¤×” ×‘××´×");
  const res=findClosestCombo(target);
  const sum=+res.sum.toFixed(3);
  const diff=(sum - target).toFixed(3);
  const comboText=res.combo.map(b=>cleanLabel(b)).join(" + ");
  const out=document.getElementById("out");
  out.style.display="block";
  out.innerHTML=`
  <div class="result">
  ×§×— ××ª ×”×‘×œ×•×§×™×:<br><br>${formatBlocks(res.combo)}
  <div class="sumline">${target.toFixed(3)} â‰ˆ ${comboText}</div>
  <br><b>×¡×›×•× ×‘×¤×•×¢×œ:</b> ${sum} ××´×
  </div>
  <div class="comment">
  ${diff==0 ? "××“×•×™×§ ×œ×—×œ×•×˜×™×Ÿ" : `×¢×™×’×•×œ ×©×œ ${diff>0?"+":"âˆ’"}${Math.abs(diff)} ××´× ×›×“×™ ×œ×”×ª××™× ×œ×¡×˜`}
  </div>`;
};
</script>
</body>
</html>
